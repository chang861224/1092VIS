<!DOCTYPE html>

<html>
<head>
    <meta charset='UTF-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=Edge'>
    <title>Information Visualization</title>
    <meta name='viewport' content='width=device-width,initial-scale=1.0'>
    <link href='./css/base.css' rel='stylesheet' type='text/css' media='all'>
    <script src='https://d3js.org/d3.v6.min.js'></script>
</head>

<body>
    <header id='header'>
        <div class='inner'>
            <h1 id='title'>Chinese Professional Baseball League</h1>
        </div>
    </header>
    <main id='main' class='inner'>
        <div id="graph"></div>
        <div id='graph-info'>
            <div id='student-info'>
                <p class='sub-title'>基本資料<p>
                <p class='content'>姓名：張麒竑<br>系級：資科碩一<br>學號：109753119</p>
            </div>
            <div id='motivation'>
                <p class='sub-title'>動機<p>
                <p class='content'>
                中華職棒（CPBL）自1990年開打以來，至今以邁入第32年，孕育出不少棒球好手。
                </p>
                <p class='content'>
                自從2013年開放高中生參加選秀，以及各個球團的用心經營，每支球隊的戰力都相當完整，不只有在一軍戰場上奮力拚戰的主力球員，還有在二軍等待機會的替補球員，甚至有球隊建立了以年輕球員為主體、以磨練基本功為主軸的農場體系，讓整體球隊戰力都有顯著的提昇！
                </p>
                <p class='content'>
                然而，由於各隊的體系都漸趨完整，每隊的球員都有年輕化的趨勢，每年登錄的球員數也在持續增加，也因此，我想做中華職棒這31年來所登錄的球員總數數據圖。（註：中華職棒32年賽季今年剛開打，球員登錄尚有變動，故未將今年球季納入統計。）
                </p>
            </div>
            <div id='description'>
                <p class='sub-title'>說明<p>
                <p class='content'>這是圖片說明</p>
            </div>
        </div>
    </main>
</body>

<script>
var margin = {top: 50, bottom: 50, left: 50, right: 100};
var width = 960 - margin.left - margin.right;
var height = 500 - margin.top - margin.bottom;
var data = [0,
    99, 102, 109, 155, 172,
    186, 176, 222, 228, 222,
    116, 109, 116, 203, 219,
    269, 355, 382, 338, 307,
    270, 270, 209, 248, 251,
    261, 263, 273, 260, 296,
    325
];

let svg = d3.select("div#graph")
            .append("svg")
            .attr("width", width * 1.1)
            .attr("height", height * 1.3);

let xScale = d3.scaleLinear()
    .domain([0, data.length])
    .range([0, width]);

let yScale = d3.scaleLinear()
    .domain([0, 400])
    .range([height, 0]);

svg.selectAll('rect')
    .data(data)
    .enter()
    .append('rect')
    .attr('x', (d, i) => xScale(i) + width * 0.05)
    .attr('y', d => yScale(d) + height * 0.2)
    .attr('height', d => 400 - yScale(d))
    .attr('width', 15)
    .style('fill', 'red');

svg.append('text')
   .attr('x', width * 0.5)
   .attr('y', height * 0.1)
   .attr('text-anchor', 'middle')
   .style('font-size', '20px')
   .style('text-decoration', 'underline')
   .text('中華職棒歷年登錄球員人數');

svg.append('g')
   .attr('transform', 'translate(' + (15 * 0.5 + width * 0.05) + ',' + height * 1.2 + ')')
   .call(d3.axisBottom(xScale));

svg.append('text')
   .attr('transform', 'translate(' + width * 1.05 + ',' + height * 1.28 + ')')
   .style('text-anchor', 'middle')
   .text('年度');

svg.append('g')
   .attr('transform', 'translate(' + (15 * 0.5 + width * 0.05) + ',' + height * 0.2 + ')')
   .call(d3.axisLeft(yScale));

svg.append('text')
   .attr('y', margin.left)
   .attr('x', '2em')
   .attr('dy', '1em')
   .style('text-anchor', 'middle')
   .text('球員數');
</script>
</html>
